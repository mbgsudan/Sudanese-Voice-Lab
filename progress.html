<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ“Š Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªÙ‚Ø¯Ù… - ØµÙˆØªÙ†Ø§</title>
<style>
body{font-family:Cairo,Arial,sans-serif;background:#0b0b0b;color:#fff;text-align:center;margin:0;padding:0}
.container{max-width:800px;margin:40px auto;background:#111;padding:25px;border-radius:20px;box-shadow:0 0 30px rgba(0,0,0,.4)}
h1{color:#00e0b6;margin-bottom:15px}
.bar{height:14px;background:#333;border-radius:8px;margin:8px 0;overflow:hidden}
.fill{height:100%;border-radius:8px;transition:width .3s;background:linear-gradient(90deg,#00bfa6,#00e0b6)}
.speaker-card{background:#1a1a1a;margin:12px 0;padding:15px;border-radius:12px;text-align:right}
.speaker-name{font-weight:bold;color:#00e0b6}
</style>
</head>
<body>
<div class="container">
<h1>ğŸ“Š Ù„ÙˆØ­Ø© Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ù…ØªØ­Ø¯Ø«ÙŠÙ†</h1>
<div id="speakersList">Ø¬Ø§Ø±Ù ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...</div>
</div>

<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.47.10/+esm';
const supabase = createClient(
  "https://qcctqvmwwpsoiexgdqwp.supabase.co",
  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFjY3Rxdm13d3Bzb2lleGdkcXdwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI3MjI1OTcsImV4cCI6MjA3ODI5ODU5N30.uTfskCuzkZNcvy1QdaOzqlW8km-wcZQoVRFi6k2xndQ"
);
async function loadProgress(){
  const list=document.getElementById("speakersList");
  const {data:sp}=await supabase.from("speakers").select("id,name");
  if(!sp||!sp.length){list.textContent="Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ØªØ­Ø¯Ø«ÙˆÙ† Ø¨Ø¹Ø¯.";return;}
  list.innerHTML="";
  for(const s of sp){
    const {count}=await supabase.from("recordings").select("*",{count:"exact",head:true}).eq("speaker_id",s.id);
    const {count:accepted}=await supabase.from("recordings").select("*",{count:"exact",head:true}).eq("speaker_id",s.id).eq("status","approved");
    const pct=count?Math.round((accepted||0)/count*100):0;
    const div=document.createElement("div");
    div.className="speaker-card";
    div.innerHTML=`<div class='speaker-name'>ğŸ™ï¸ ${s.name}</div>
    <div>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª: ${count||0}</div>
    <div>Ø§Ù„Ù…Ù‚Ø¨ÙˆÙ„Ø©: ${accepted||0}</div>
    <div class='bar'><div class='fill' style='width:${pct}%;'></div></div>
    <div>${pct}% Ø¥Ù†Ø¬Ø§Ø²</div>`;
    list.appendChild(div);
  }
}
loadProgress();
</script>
</body>
</html>